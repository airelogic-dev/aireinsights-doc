<!DOCTYPE html>
<html lang="en">

    <head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <!-- Begin Jekyll SEO tag v2.7.1 -->
<title>Setting up the first data pipeline | AireInsights Docs</title>
<meta name="generator" content="Jekyll v4.1.1" />
<meta property="og:title" content="Setting up the first data pipeline" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="Defining a pipeline Every pipeline needs a unique name. This is how it is referenced in triggers." />
<meta property="og:description" content="Defining a pipeline Every pipeline needs a unique name. This is how it is referenced in triggers." />
<meta property="og:site_name" content="AireInsights Docs" />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2021-07-02T10:37:03+00:00" />
<meta name="twitter:card" content="summary" />
<meta property="twitter:title" content="Setting up the first data pipeline" />
<script type="application/ld+json">
{"description":"Defining a pipeline Every pipeline needs a unique name. This is how it is referenced in triggers.","@type":"BlogPosting","headline":"Setting up the first data pipeline","dateModified":"2021-07-02T10:37:03+00:00","datePublished":"2021-07-02T10:37:03+00:00","url":"/docs/getting-started/first-pipeline/","mainEntityOfPage":{"@type":"WebPage","@id":"/docs/getting-started/first-pipeline/"},"@context":"https://schema.org"}</script>
<!-- End Jekyll SEO tag -->

  <meta property="og:image" content="/assets/posts/"/>
  <link rel="stylesheet" href="/assets/css/main.css">
  <link rel="shortcut icon" type="image/png" href="/assets/img/favicon.png" >
  <link rel="alternate" type="application/rss+xml" title="AireInsights Docs" href="/feed.xml">
  <script src="/assets/js/main.js"></script>
  
</head>

    <body>
    <header class="uk-background-secondary">
    <div data-uk-sticky="sel-target: .uk-navbar-container; cls-active: uk-navbar-sticky" class="uk-sticky uk-sticky-fixed" style="position: fixed; top: 0px; width: 1904px;">
        <nav class="uk-navbar-container">
            <div class="uk-container">
    <div data-uk-navbar>
        <div class="uk-navbar-left">
            <a class="uk-navbar-item uk-logo uk-visible@m" href="/">AireInsights Docs</a>
            
              <a class="uk-navbar-toggle uk-hidden@m" href="#offcanvas-docs" data-uk-toggle><span data-uk-navbar-toggle-icon></span> <span class="uk-margin-small-left">Mini-nav</span></a>
            

        </div>
        <div class="uk-navbar-center uk-hidden@m">
            <a class="uk-navbar-item uk-logo" href="/">AireInsights Docs</a>
        </div>
        <div class="uk-navbar-right">
            <ul class="uk-navbar-nav uk-visible@m">
                
                    
                    
                    
                        <li><a href="/docs/getting-started/what-is" >Getting Started</a></li>
                    
                
                    
                    
                    
                        <li><a href="/changelog/" >Changelog</a></li>
                    
                
                    
                    
                    
                        <li><a href="https://www.airelogic.com/" target="_blank" >About Airelogic</a></li>
                    
                
            </ul>

            
            <div>
                <a class="uk-navbar-toggle" uk-search-icon href="#"></a>
                <div class="uk-drop uk-background-default uk-border-rounded" uk-drop="mode: click; pos: left-center; offset: 0">
                    <form class="uk-search uk-search-navbar uk-width-1-1" onsubmit="return false;">
                        <input id="navbar-search" class="uk-search-input" type="search" placeholder="Search..." autofocus>
                    </form>
                    <ul id="navbar-search-results" class="uk-position-absolute uk-width-1-1 uk-list"></ul>
                </div>
            </div>
            <script>
            SimpleJekyllSearch({
                searchInput: document.getElementById('navbar-search'),
                resultsContainer: document.getElementById('navbar-search-results'),
                noResultsText: '<li>No results found</li>',
                searchResultTemplate: '<li><a href="{url}">{title}</a></li>',
                json: '/search.json'
            });
            </script>
            

            
              <a class="uk-navbar-toggle uk-hidden@m" href="#offcanvas" data-uk-toggle><span data-uk-navbar-toggle-icon></span> <span class="uk-margin-small-left">Menu</span></a>
            


        </div>
    </div>
</div>

        </nav>
    </div>
</header>


    

    <div class="uk-section">
    <div class="uk-container">
        <div class="uk-grid-large" data-uk-grid>

            <div class="sidebar-fixed-width uk-visible@m">
                <div class="sidebar-docs uk-position-fixed">
                    
                    <h5>Getting Started</h5>
                    <ul class="uk-nav uk-nav-default doc-nav">
                    
                      
                      
                      <li class=""><a href="/docs/getting-started/what-is/">Getting Started with AireInsights</a></li>
                    
                      
                      
                      <li class="uk-active"><a href="/docs/getting-started/first-pipeline/">Setting up the first data pipeline</a></li>
                    
                    </ul>
                    
                    <h5>Concepts</h5>
                    <ul class="uk-nav uk-nav-default doc-nav">
                    
                      
                      
                      <li class=""><a href="/docs/concepts/pipeline/">Data Pipeline</a></li>
                    
                      
                      
                      <li class=""><a href="/docs/concepts/step/">Processing Step</a></li>
                    
                      
                      
                      <li class=""><a href="/docs/concepts/data-lake/">Data Lake</a></li>
                    
                      
                      
                      <li class=""><a href="/docs/concepts/trigger/">Pipeline triggers</a></li>
                    
                    </ul>
                    
                    <h5>Toolkits</h5>
                    <ul class="uk-nav uk-nav-default doc-nav">
                    
                      
                      
                      <li class=""><a href="/docs/sdk/python-sdk/">Python SDK</a></li>
                    
                      
                      
                      <li class=""><a href="/docs/sdk/csharp-dotnet-sdk/">C# SDK</a></li>
                    
                    </ul>
                    
                    <h5>API</h5>
                    <ul class="uk-nav uk-nav-default doc-nav">
                    
                      
                      
                      <li class=""><a href="/docs/api/auth/">Authentication</a></li>
                    
                      
                      
                      <li class=""><a href="/docs/api/endpoints/">Endpoints</a></li>
                    
                    </ul>
                    
                </div>
            </div>

            <div class="uk-width-1-1 uk-width-expand@m">

                <article class="uk-article">

                    <h1 class="uk-article-title">Setting up the first data pipeline</h1>

                    <p class="subtitle uk-text-lead uk-text-muted">Become aquainted with AireInsights</p>

                    <div class="uk-article-meta uk-margin-top uk-margin-medium-bottom">
                        





<time datetime="2021-07-02T10:37:03+00:00" itemprop="datePublished">
    
    Jul 2, 2021
</time>

                    </div>

                    <div class="article-content">
                        <h2 id="defining-a-pipeline">Defining a pipeline</h2>
<p>Every pipeline needs a unique name. This is how it is referenced in triggers.</p>

<div class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="na">Name</span><span class="pi">:</span> <span class="s">my-first-pipeline</span>
<span class="na">InputFormat</span><span class="pi">:</span> <span class="s">Xml</span>
</code></pre></div></div>

<p>Our pipeline needs at least one step, in this example we make use of the fictional module called <code class="language-plaintext highlighter-rouge">demo-module</code>. Each step also needs a name, this is how it it referenced in input templates for other steps. The <code class="language-plaintext highlighter-rouge">InputTemplate</code> uses the <a href="https://shopify.github.io/liquid/">Liquid</a> templating language to map the input data for this step, which will then be sent to the module. Because the data is stored internally as a string we need to tell AireInsights what the input and output formats of this module are so it can correctly interpret and map it between steps.</p>
<div class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
<span class="nn">...</span>
<span class="na">Steps</span><span class="pi">:</span>
  <span class="pi">-</span> <span class="na">Name</span><span class="pi">:</span> <span class="s">demo-step</span>
    <span class="na">InputTemplate</span><span class="pi">:</span> <span class="s1">'</span><span class="s">{{</span><span class="nv"> </span><span class="s">input.foo</span><span class="nv"> </span><span class="s">}}'</span> <span class="c1"># the pipeline input data is accessed through the variable called input </span>
    <span class="na">ModuleName</span><span class="pi">:</span> <span class="s">demo-module</span>
    <span class="na">ModuleInputFormat</span><span class="pi">:</span> <span class="s">Unstructured</span>
    <span class="na">ModuleOutputFormat</span><span class="pi">:</span> <span class="s">Json</span>

</code></pre></div></div>

<p>The final part of our minimal pipeline definition is the output config. Here we specify, using a Liquid template, how the output of the different steps should be combined to the output of the pipeline. The output data of our <code class="language-plaintext highlighter-rouge">demo-step</code> step is referenced using a variable with the same name. <code class="language-plaintext highlighter-rouge">DataFormat</code> specifies the dataformat of the output so it can use the correct <code class="language-plaintext highlighter-rouge">Content-Type</code> headers. And finally we specify the callback url to tell AireInsights where to send the data to. Because data processing can be quite slow sometimes AireInsights pipelines are designed to run as an asynchronous process.</p>
<div class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
<span class="nn">...</span>
<span class="na">Output</span><span class="pi">:</span>
  <span class="pi">-</span> <span class="na">Template</span><span class="pi">:</span> <span class="s1">'</span><span class="s">{"foo":</span><span class="nv"> </span><span class="s">"{{</span><span class="nv"> </span><span class="s">demo-step</span><span class="nv"> </span><span class="s">}}"</span><span class="nv"> </span><span class="s">}'</span>
    <span class="na">DataFormat</span><span class="pi">:</span> <span class="s">Json</span>
    <span class="na">CallbackEndpoint</span><span class="pi">:</span> <span class="s1">'</span><span class="s">https://some-url.com/callback'</span>
 
</code></pre></div></div>

<h2 id="defining-a-trigger">Defining a trigger</h2>
<p>Triggers is how data pipelines are invoked. A <code class="language-plaintext highlighter-rouge">NewDataTrigger</code> trigger invokes a pipeline every time data is added to the data collection in the data lake specified in <code class="language-plaintext highlighter-rouge">DataCollection</code>.</p>
<div class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="na">Name</span><span class="pi">:</span> <span class="s">demo-trigger</span>
<span class="na">DataCollection</span><span class="pi">:</span> <span class="s">demo-data</span>
<span class="na">Pipeline</span><span class="pi">:</span> <span class="s">my-first-pipeline</span>
</code></pre></div></div>

<h2 id="submitting-data-to-the-data-lake">Submitting data to the data lake</h2>
<p>Data in the data lake is organised in data collections, where all the data in one collection should be of the same format and structure, so it can be treated the same when sent to a pipeline.
We can submit new data to a data collection posting the data using this endpoint:</p>

<p><em>Route:</em> POST <code class="language-plaintext highlighter-rouge">/{username}/Data/demo-data</code><br />
<em>Header:</em> <code class="language-plaintext highlighter-rouge">Content-Type: application/xml</code><br />
<em>Payload:</em> <code class="language-plaintext highlighter-rouge">&lt;xml&gt;&lt;foo&gt;bar&lt;/foo&gt;&lt;/xml&gt;</code></p>

<p>By doing this, the trigger will have invoked the pipeline with this newly submitted data item. And after processing it will have sent the output to the specified callback.</p>

                        <div class="share uk-text-center">
    <a href="https://twitter.com/intent/tweet?text=Setting up the first data pipeline&url=/docs/getting-started/first-pipeline/&via=airelogic&related=airelogic" rel="nofollow" target="_blank" title="Share on Twitter" onclick="window.open(this.href, 'twitter', 'width=550,height=235');return false;"><span data-uk-icon="icon: twitter; ratio: 1.2"></span></a>
    <a  class="uk-margin-small-left" href="https://www.facebook.com/sharer/sharer.php?u=%2Fdocs%2Fgetting-started%2Ffirst-pipeline%2F" rel="nofollow" target="_blank" title="Share on Facebook" onclick="window.open(this.href, 'facebook-share','width=580,height=296');return false;"><span data-uk-icon="icon: facebook; ratio: 1.2"></span></a>
</div>

                    </div>

                    <hr class="uk-margin-medium">

                    


  
  

  
  
    <ul class="uk-pagination uk-margin-top">
          
            
            
            <li><a class="hvr-back" href="/docs/getting-started/what-is/">&larr; Previous</a></li>
          
          
            
            
            <li class="uk-margin-auto-left"><a class="hvr-forward" href="/docs/concepts/pipeline/">Next &rarr;</a></li>
          
    </ul>
    


                    <div class="uk-margin-large-top">
    <h3>Related Articles</h3>

    
    
    

    <ul class="uk-list">
    

    
    

    

    

    

    
    

    

    

    

    
    

    

    

    

    
    

    

    

    

    
    

    

    

    

    
    

    

    

    

    
    

    

    

    

    
    

    

    
        <li><a href="/docs/getting-started/what-is/">Getting Started with AireInsights</a></li>
        
        
    

    

    
    

    

    

    

    
    

    

    

    
    </ul>
</div>


                    
                </article>

                <div>
                    <div class="uk-section uk-text-center uk-link-muted">
    <div class="uk-margin-medium uk-text-small">
        <div></div>
        <div></div> 
    </div> 
</div>

                </div>

                <script>
                    // Table of contents scroll to
                    UIkit.scroll('#markdown-toc a', {
                        duration: 400,
                        offset: 120
                    });
                </script>

            </div>

    </div>
</div>


    <div id="offcanvas-docs" data-uk-offcanvas="overlay: true">
    <div class="uk-offcanvas-bar">

        <button class="uk-offcanvas-close" type="button" data-uk-close></button>

        
        <h5 class="uk-margin-top">Getting Started</h5>
        <ul class="uk-nav uk-nav-default doc-nav">
        
          
          
          <li class=""><a href="/docs/getting-started/what-is/">Getting Started with AireInsights</a></li>
        
          
          
          <li class="uk-active"><a href="/docs/getting-started/first-pipeline/">Setting up the first data pipeline</a></li>
        
        </ul>
        
        <h5 class="uk-margin-top">Concepts</h5>
        <ul class="uk-nav uk-nav-default doc-nav">
        
          
          
          <li class=""><a href="/docs/concepts/pipeline/">Data Pipeline</a></li>
        
          
          
          <li class=""><a href="/docs/concepts/step/">Processing Step</a></li>
        
          
          
          <li class=""><a href="/docs/concepts/data-lake/">Data Lake</a></li>
        
          
          
          <li class=""><a href="/docs/concepts/trigger/">Pipeline triggers</a></li>
        
        </ul>
        
        <h5 class="uk-margin-top">Toolkits</h5>
        <ul class="uk-nav uk-nav-default doc-nav">
        
          
          
          <li class=""><a href="/docs/sdk/python-sdk/">Python SDK</a></li>
        
          
          
          <li class=""><a href="/docs/sdk/csharp-dotnet-sdk/">C# SDK</a></li>
        
        </ul>
        
        <h5 class="uk-margin-top">API</h5>
        <ul class="uk-nav uk-nav-default doc-nav">
        
          
          
          <li class=""><a href="/docs/api/auth/">Authentication</a></li>
        
          
          
          <li class=""><a href="/docs/api/endpoints/">Endpoints</a></li>
        
        </ul>
        

    </div>
</div>


    <div id="offcanvas" data-uk-offcanvas="flip: true; overlay: true">
    <div class="uk-offcanvas-bar">

        <button class="uk-offcanvas-close" type="button" data-uk-close></button>

        <ul class="uk-nav uk-nav-default">
            <li><a class="uk-logo uk-margin-small-bottom" href="/">AireInsights Docs</a></li>
            
                
            <li><a href="/docs/getting-started/what-is" >Getting Started</a></li>
            
                
            <li><a href="/changelog/" >Changelog</a></li>
            
                
            <li><a href="https://www.airelogic.com/" target="_blank" >About Airelogic</a></li>
            
        </ul>

        <div class="uk-margin-small-top uk-text-center uk-text-muted uk-link-muted">
            <div data-uk-grid class="uk-child-width-auto uk-grid-small uk-flex-center uk-grid">
                













            </div>
        </div>

    </div>
</div>


    

    </body>

</html>
